{"version":3,"file":"index.js","sources":["../../src/index.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\n\ninterface OtpInputProps {\n  otpFields?: number | undefined;\n  onCodeFilled: any;\n  autoFocus?: boolean | undefined;\n  disabled?: boolean | undefined;\n  value?: string | undefined;\n  placeholder?: string | undefined;\n}\n\nconst OtpInput = ({\n  otpFields = 5,\n  onCodeFilled,\n  autoFocus = false,\n  disabled = false,\n  value = \"\",\n  placeholder = \"-\",\n}: OtpInputProps) => {\n  const [activeInput, setActiveInput] = useState(0);\n  const [otp, setOtp] = useState(value);\n  const inputRef = useRef(new Array(otpFields).fill(\"\"));\n\n  const handleChange = (e) => {\n    if (/\\d/.test(e.target.value) && e.target.value !== \"\") {\n      const updateOtp = Array.from(otp);\n      updateOtp[activeInput] = e.target.value;\n      setOtp(updateOtp.join(\"\"));\n      if (updateOtp.length < otpFields) {\n        setActiveInput((prev) => prev + 1);\n      }\n    }\n  };\n\n  const handleFocus = useCallback(\n    () => {\n      inputRef[activeInput].focus();\n    },\n    [activeInput]\n  );\n\n  const handleOTPDeletion = (e) => {\n    if (e.key === \"Backspace\" && otp.length > 0) {\n      const updateOtp = Array.from(otp);\n      updateOtp[activeInput] = \"\";\n      setOtp(updateOtp.join(\"\"));\n      if (activeInput > 0) {\n        setActiveInput((prev) => prev - 1);\n      }\n    }\n  };\n\n  const handlePaste = (e) => {\n    const pasteData = e.clipboardData\n      .getData(\"text/plain\")\n      .trim()\n      .slice(0, otpFields)\n      .split(\"\");\n    setOtp(pasteData);\n    setActiveInput(pasteData.length - 1);\n  };\n\n  useEffect(() => {\n    if (activeInput >= 0 && activeInput < otpFields) {\n      handleFocus();\n    }\n  }, [activeInput]);\n\n  useEffect(() => {\n    if (otp.length === otpFields) {\n      onCodeFilled(otp);\n    }\n  }, [otp]);\n\n  return (\n    <div>\n      {new Array(otpFields).fill(\"\").map((i, index) => (\n        <input\n          type=\"text\"\n          placeholder={placeholder}\n          value={otp[index] || \"\"}\n          onChange={handleChange}\n          onKeyDown={handleOTPDeletion}\n          maxLength={1}\n          key={index}\n          autoFocus={autoFocus}\n          ref={(ref) => (inputRef[index] = ref)}\n          disabled={disabled}\n          onPaste={handlePaste}\n          style={{\n            width: \"56px\",\n            height: \"56px\",\n            marginRight: \"10px\",\n            border: \"1px solid #d9d9d9\",\n            boxSizing: \"border-box\",\n            boxShadow: \"0px 0.5px 2px rgba(0,0,0,0.1)\",\n            borderRadius: \"10px\",\n            textAlign: \"center\",\n          }}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default OtpInput;\n"],"names":["OtpInput","_a","_b","otpFields","onCodeFilled","_c","autoFocus","_d","disabled","_e","value","_f","placeholder","_g","useState","activeInput","setActiveInput","_h","otp","setOtp","inputRef","useRef","Array","fill","handleChange","e","test","target","updateOtp","from","join","length","prev","handleFocus","useCallback","focus","handleOTPDeletion","key","handlePaste","pasteData","clipboardData","getData","trim","slice","split","useEffect","React","createElement","map","i","index","type","onChange","onKeyDown","maxLength","ref","onPaste","style","width","height","marginRight","border","boxSizing","boxShadow","borderRadius","textAlign"],"mappings":"gFAWM,IAAAA,EAAW,SAACC,GAChB,IAAAC,EAAAD,EAAAE,UAAAA,OAAY,IAAAD,EAAA,IACZE,EAAYH,EAAAG,aACZC,cAAAC,OAAY,IAAAD,KACZE,EAAAN,EAAAO,SAAAA,cAAgBD,EAChBE,EAAAR,EAAAS,MAAAA,OAAK,IAAAD,EAAG,GAAEA,EACVE,EAAiBV,EAAAW,YAAjBA,OAAW,IAAAD,EAAG,IAAGA,EAEXE,EAAgCC,EAAS,GAAxCC,EAAWF,EAAA,GAAEG,EAAcH,EAAA,GAC5BI,EAAgBH,EAASJ,GAAxBQ,EAAGD,EAAA,GAAEE,EAAMF,EAAA,GACZG,EAAWC,EAAO,IAAIC,MAAMnB,GAAWoB,KAAK,KAE5CC,EAAe,SAACC,GACpB,GAAI,KAAKC,KAAKD,EAAEE,OAAOjB,QAA6B,KAAnBe,EAAEE,OAAOjB,MAAc,CACtD,IAAMkB,EAAYN,MAAMO,KAAKX,GAC7BU,EAAUb,GAAeU,EAAEE,OAAOjB,MAClCS,EAAOS,EAAUE,KAAK,KAClBF,EAAUG,OAAS5B,GACrBa,GAAe,SAACgB,GAAS,OAAAA,EAAO,CAAC,GAEpC,CACH,EAEMC,EAAcC,GAClB,WACEd,EAASL,GAAaoB,OACxB,GACA,CAACpB,IAGGqB,EAAoB,SAACX,GACzB,GAAc,cAAVA,EAAEY,KAAuBnB,EAAIa,OAAS,EAAG,CAC3C,IAAMH,EAAYN,MAAMO,KAAKX,GAC7BU,EAAUb,GAAe,GACzBI,EAAOS,EAAUE,KAAK,KAClBf,EAAc,GAChBC,GAAe,SAACgB,GAAS,OAAAA,EAAO,CAAC,GAEpC,CACH,EAEMM,EAAc,SAACb,GACnB,IAAMc,EAAYd,EAAEe,cACjBC,QAAQ,cACRC,OACAC,MAAM,EAAGxC,GACTyC,MAAM,IACTzB,EAAOoB,GACPvB,EAAeuB,EAAUR,OAAS,EACpC,EAcA,OAZAc,GAAU,WACJ9B,GAAe,GAAKA,EAAcZ,GACpC8B,GAEJ,GAAG,CAAClB,IAEJ8B,GAAU,WACJ3B,EAAIa,SAAW5B,GACjBC,EAAac,EAEjB,GAAG,CAACA,IAGF4B,EACGC,cAAA,MAAA,KAAA,IAAIzB,MAAMnB,GAAWoB,KAAK,IAAIyB,KAAI,SAACC,EAAGC,GAAU,OAC/CJ,yBACEK,KAAK,OACLvC,YAAaA,EACbF,MAAOQ,EAAIgC,IAAU,GACrBE,SAAU5B,EACV6B,UAAWjB,EACXkB,UAAW,EACXjB,IAAKa,EACL5C,UAAWA,EACXiD,IAAK,SAACA,GAAQ,OAACnC,EAAS8B,GAASK,GACjC/C,SAAUA,EACVgD,QAASlB,EACTmB,MAAO,CACLC,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,OAAQ,oBACRC,UAAW,aACXC,UAAW,gCACXC,aAAc,OACdC,UAAW,WAGhB,IAGP"}